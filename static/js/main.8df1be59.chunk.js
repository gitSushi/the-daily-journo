(this["webpackJsonpthe-daily-journo"]=this["webpackJsonpthe-daily-journo"]||[]).push([[0],{22:function(e,t,a){e.exports=a(43)},27:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),l=a.n(r),o=(a(27),a(4)),i=a(5),c=a(2),u=a(7),d=a(6),m=a(20),p=a.n(m),h=a(3),f=(a(42),function(e){var t=e.active,a=e.title,n=e.onSetActive;return s.a.createElement("span",{className:t?"wall-button this-btn":"wall-button",onClick:n},a)}),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.toggleIconInput=n.toggleIconInput.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"toggleIconInput",value:function(){document.getElementsByClassName("share")[0].classList.add("rotate-to-hide"),document.getElementsByClassName("the-form")[0].classList.add("slide-down")}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-container"},s.a.createElement("div",{className:"share",onClick:this.toggleIconInput},s.a.createElement("span",null,s.a.createElement("i",{className:"fas fa-pen-nib fa-2x"}))),s.a.createElement("div",{className:"the-form"},s.a.createElement("form",{onSubmit:this.props.submit},s.a.createElement("label",{htmlFor:"feel-like-sharing"},"Feel like sharing :"),s.a.createElement("input",{id:"feel-like-sharing",type:"text",name:"changeInput"}))))}}]),a}(s.a.Component),b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={unfollowSpan:""},n.showUnfollow=n.showUnfollow.bind(Object(c.a)(n)),n.hideUnfollow=n.hideUnfollow.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"showUnfollow",value:function(){this.setState({unfollowSpan:"unfollow"})}},{key:"hideUnfollow",value:function(){this.setState({unfollowSpan:""})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("li",{className:"friend-item",onMouseOver:this.showUnfollow,onMouseLeave:this.hideUnfollow},this.props.name,s.a.createElement("span",{onClick:this.props.unfollow,className:"unfollow",onMouseOver:function(e){e.target.style.color="red"},onMouseLeave:function(e){e.target.style.color="#333"}},this.state.unfollowSpan)))}}]),a}(s.a.Component);var E=Object(h.b)((function(e){return e}))((function(e){return s.a.createElement("div",null,0===e.collections[e.currentUser.id].friends.length?s.a.createElement("p",null,"Your Sucky Friends ain't here or YOU are a LOSER !"):s.a.createElement("div",null,s.a.createElement("ul",null,e.collections[e.currentUser.id].friends.map((function(t,a){return s.a.createElement(b,{name:t,key:a,unfollow:e.unfollow})})))))}));var y=Object(h.b)((function(e){return e}))((function(e){var t=e.collections[e.currentUser.id].posts;return s.a.createElement("div",null,0===t.length&&s.a.createElement("p",null,"Your Most Intimate Thoughts"),s.a.createElement("div",{className:"your-msg-wall"},t.slice(0).reverse().map((function(e,t){return s.a.createElement("div",{key:t,className:"your-msg"},s.a.createElement("p",{className:"your-msg-post"},e.post),s.a.createElement("p",{className:"date your-msg-date"},"at ",function(e){var t=Date.now(),a=Math.floor((t-e)/864e5);return a<1?"today":a<2?"Yesterday":"".concat(a," days ago")}(e.date)))}))))}));var g=Object(h.b)((function(e){return{theWall:e.currentUser.friendsPosts}}))((function(e){var t=e.theWall;return s.a.createElement("div",null,0===t.length&&s.a.createElement("p",null,"No message on the board yet."),s.a.createElement("div",{className:"the-wall"},t.slice().sort((function(e,t){return t.date-e.date})).map((function(e,t){return s.a.createElement("div",{key:t,className:"post-block"},s.a.createElement("h3",{className:"wall-post username"},e.userName),s.a.createElement("p",{className:"wall-post post"},e.post),s.a.createElement("p",{className:"wall-post date"},function(e){var t=Date.now(),a=Math.floor((t-e)/864e5);return a<1?"today":a<2?"Yesterday":"".concat(a," days ago")}(e.date)))}))))})),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.toggleIconInput=n.toggleIconInput.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"toggleIconInput",value:function(){document.getElementsByClassName("share")[1].classList.add("rotate-to-hide"),document.getElementsByClassName("the-form")[1].classList.add("slide-down")}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-container"},s.a.createElement("div",{className:"share",onClick:this.toggleIconInput},s.a.createElement("span",null,s.a.createElement("i",{className:"fas fa-user-friends fa-2x"}))),s.a.createElement("div",{className:"the-form"},s.a.createElement("form",{onSubmit:this.props.attrAddFriend},s.a.createElement("label",{htmlFor:"friend-choice"},"Add a friend : "),s.a.createElement("input",{list:"friend-data-list",name:"friendChoice",id:"friend-choice"}),s.a.createElement("datalist",{id:"friend-data-list"},this.props.collections.map((function(e,t){return s.a.createElement("option",{key:t,value:e.userName})}))))))}}]),a}(s.a.Component),N=Object(h.b)((function(e){return e}))(O),j=[{title:"The Wall",key:0},{title:"Your Messages",key:1},{title:"Friends",key:2}],I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activeIndex:0,todaysDate:""},n.submitPost=n.submitPost.bind(Object(c.a)(n)),n.unfollow=n.unfollow.bind(Object(c.a)(n)),n.methodAddFriend=n.methodAddFriend.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=new Date,t=e.getFullYear(),a=["january","february","march","april","may","june","july","august","september","october","november","december"][e.getMonth()],n=e.getDate(),s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()];this.setState({todaysDate:"".concat(s,". ").concat(a," ").concat(n,", ").concat(t)})}},{key:"submitPost",value:function(e){e.preventDefault();var t=e.target.changeInput.value;if(""!==t){var a=Date.now(),n={userId:this.props.currentUser.id,post:t,date:"".concat(a)};this.props.sendPost(n);var s={userId:this.props.currentUser.id,postId:this.props.collections[this.props.currentUser.id].posts.length-1};10===this.props.lastTen.length?(this.props.shiftLastTen(),this.props.pushLastTen(s)):this.props.pushLastTen(s),e.target.changeInput.value=""}document.getElementsByClassName("the-form")[0].classList.remove("slide-down"),document.getElementsByClassName("share")[0].classList.remove("rotate-to-hide")}},{key:"clickWall",value:function(e){this.setState({activeIndex:e})}},{key:"unfollow",value:function(e){var t=this.props.collections[this.props.currentUser.id].friends,a=e.target.previousSibling.textContent,n=this.props.currentUser.friendsPosts.filter((function(e){return e.userName!==a})),s=t.indexOf(a);this.props.removeFriend(this.props.currentUser.id,s),this.props.updateRemovedFriendsPosts(n)}},{key:"getNewPosts",value:function(e){var t=this.props.collections.findIndex((function(t){return t.userName===e})),a=this.props.collections[t].posts;a.forEach((function(t){t.userName=e})),this.props.updateAddedFriendsPosts(a)}},{key:"methodAddFriend",value:function(e){e.preventDefault();var t=e.target.friendChoice.value;e.target.friendChoice.value="";var a=[];(this.props.collections.forEach((function(e){return a.push(e.userName)})),a.includes(t)&&t!==this.props.collections[this.props.currentUser.id].userName)&&(this.props.collections[this.props.currentUser.id].friends.includes(t)||(this.props.addFriend(this.props.currentUser.id,t),this.getNewPosts(t)));document.getElementsByClassName("the-form")[1].classList.remove("slide-down"),document.getElementsByClassName("share")[1].classList.remove("rotate-to-hide")}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeIndex,n=t.todaysDate;return s.a.createElement("div",null,this.props.currentUser.isLoggedIn&&s.a.createElement("div",null,s.a.createElement("p",{className:"intro-user-account"},s.a.createElement("span",null,"Hello"," ",s.a.createElement("span",{className:"username"},this.props.currentUser.name)),s.a.createElement("span",{className:"todays-date"},n)),s.a.createElement("div",{className:"cross-container"},s.a.createElement(v,{submit:this.submitPost}),s.a.createElement(N,{attrAddFriend:this.methodAddFriend})),s.a.createElement("nav",{className:"wall-nav"},j.map((function(t,n){return s.a.createElement(f,{key:t.key,active:n===a,onSetActive:function(){return e.clickWall(n)},title:t.title})}))),0===a?s.a.createElement("div",null,s.a.createElement(g,null)):1===a?s.a.createElement(y,null):s.a.createElement(E,{unfollow:this.unfollow})))}}]),a}(s.a.Component),w=Object(h.b)((function(e){return e}),{sendPost:function(e){return{type:"SEND_POST",payload:{userId:e.userId,post:e.post,date:e.date}}},shiftLastTen:function(){return{type:"SHIFT_LAST_TEN"}},pushLastTen:function(e){return{type:"PUSH_LAST_TEN",payload:{userId:e.userId,postId:e.postId}}},removeFriend:function(e,t){return{type:"REMOVE_FRIEND",payload:{userId:e,deletionId:t}}},addFriend:function(e,t){return{type:"ADD_FRIEND",payload:{userId:e,friendName:t}}},updateRemovedFriendsPosts:function(e){return{type:"UPDATE_REMOVED_FRIENDS_POSTS",payload:{friendsPosts:e}}},updateAddedFriendsPosts:function(e){return{type:"UPDATE_ADDED_FRIENDS_POSTS",payload:{friendsPosts:e}}}})(I),U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={showModal:!1,availability:!0,availabilityClass:"",boolPotential:!1},n.logOut=n.logOut.bind(Object(c.a)(n)),n.handleOpenModal=n.handleOpenModal.bind(Object(c.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(c.a)(n)),n.signIn=n.signIn.bind(Object(c.a)(n)),n.availableName=n.availableName.bind(Object(c.a)(n)),n.logIn=n.logIn.bind(Object(c.a)(n)),n.formatTime=n.formatTime.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"logOut",value:function(){this.props.clearCurrentUser(),this.handleCloseModal()}},{key:"handleOpenModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"signIn",value:function(e){e.preventDefault();var t=e.target.newUserName.value;if(this.state.boolPotential){this.props.addUser(t);var a=this.props.collections.length;this.props.logCurrentUser(t,a),this.setState({availability:""})}}},{key:"availableName",value:function(e){e.preventDefault();var t=e.target.value,a=new RegExp("^".concat(t)),n=this.props.collections.map((function(e){return!a.test(e.userName)})).every((function(e){return e}));this.setState({boolPotential:n}),""===t?this.setState({availability:"",availabilityClass:""}):n?this.setState({availability:"this username is now yours",availabilityClass:"is-available"}):this.setState({availability:"username is not available",availabilityClass:"not-available"})}},{key:"logIn",value:function(e){e.preventDefault();var t=[];this.props.collections.map((function(e){return t.push(e.userName)}));var a=e.target.userName.value,n=this.getColIdx(a);t.includes(a)?this.props.logCurrentUser(a,n):alert("You are not signed in yet")}},{key:"getColIdx",value:function(e){return this.props.collections.findIndex((function(t){return t.userName===e}))}},{key:"formatTime",value:function(e){return new Date(parseInt(e,10)).toDateString()}},{key:"render",value:function(){var e=this,t=this.props.lastTen;return s.a.createElement("div",null,s.a.createElement("nav",{className:"title-nav"},s.a.createElement("div",{className:"ze-wall"},s.a.createElement("h1",null,"THE DAILY JOURNO"),s.a.createElement("p",null,"You write the news")),s.a.createElement("div",{className:"class-btn"},this.props.currentUser.isLoggedIn?s.a.createElement("button",{onClick:this.logOut},"log out"):s.a.createElement("div",null,s.a.createElement("button",{onClick:this.handleOpenModal},"log in"),s.a.createElement(p.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseModal,shouldCloseOnOverlayClick:!0,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1},s.a.createElement("div",{className:"flex-row-form"},s.a.createElement("div",{className:"flex-row-item"},s.a.createElement("p",null,"Sign in"),s.a.createElement("form",{onSubmit:this.signIn},s.a.createElement("input",{type:"text",name:"newUserName",onChange:this.availableName,required:!0})),s.a.createElement("p",{className:"availability ".concat(this.state.availabilityClass)},this.state.availability)),s.a.createElement("div",{className:"flex-row-item"},s.a.createElement("p",null,"Log in"),s.a.createElement("form",{onSubmit:this.logIn},s.a.createElement("input",{type:"text",name:"userName",required:!0}))),s.a.createElement("div",{className:"flex-row-item"},s.a.createElement("span",{className:"close",onClick:this.handleCloseModal},"\xd7"))))))),this.props.currentUser.isLoggedIn?s.a.createElement(w,null):s.a.createElement("div",null,s.a.createElement("h2",null,"The Latest News"),s.a.createElement("div",{className:"posts-wall"},this.props.lastTen.length>0?t.slice(0).reverse().map((function(t,a){return s.a.createElement("div",{key:a,className:"post-block"},s.a.createElement("h3",{className:"wall-post username"},e.props.collections[t.userId].userName),s.a.createElement("p",{className:"wall-post post"},e.props.collections[t.userId].posts[t.postId].post),s.a.createElement("p",{className:"wall-post date"},e.formatTime(e.props.collections[t.userId].posts[t.postId].date)))})):s.a.createElement("p",null,"We are a brand new website. Be the first to leave a post."))))}}]),a}(s.a.Component),k=Object(h.b)((function(e){return e}),{logCurrentUser:function(e,t){return{type:"CURRENT_USER",payload:{user:e,id:t}}},clearCurrentUser:function(){return{type:"CLEAR_USER"}},addUser:function(e){return{type:"ADD_USER",payload:{userName:e}}}})(U),S=a(10),C=a(1),D=a(8),T={collections:[{userName:"user",posts:[{post:"still alive",date:"1589470081851"},{post:"alive and kicking",date:"1589642862204"}],friends:["admin","bob"]},{userName:"admin",posts:[{post:"working hard or ...",date:"1589470081851"},{post:"hardly working",date:"1589642862204"}],friends:[]},{userName:"bob",posts:[{post:"singing all summer,",date:"1589470341051"},{post:"dying in winter",date:"1589642862204"}],friends:[]},{userName:"jane",posts:[{post:"still looking for Tarzan ...",date:"70341051"},{post:"till the day I die",date:"1590396261640"}],friends:[]}],lastTen:[],currentUser:{name:"",isLoggedIn:!1,id:-1,friendsPosts:[]}},P=function(e,t){var a=[];return e[t].friends.length>0&&e[t].friends.forEach((function(t){var n=function(e,t){return e.findIndex((function(e){return e.userName===t}))}(e,t),s=e[n].posts;s.forEach((function(e){e.userName=t})),a=[].concat(Object(D.a)(a),Object(D.a)(s))})),a},L=Object(S.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER":return Object(C.a)(Object(C.a)({},e),{},{currentUser:{name:t.payload.user,isLoggedIn:!e.currentUser.isLoggedIn,id:t.payload.id,friendsPosts:P(e.collections,t.payload.id)}});case"CLEAR_USER":return Object(C.a)(Object(C.a)({},e),{},{currentUser:{name:"",isLoggedIn:!e.currentUser.isLoggedIn,id:-1,friendsPosts:[]}});case"ADD_USER":var a=t.payload.userName;return Object(C.a)(Object(C.a)({},e),{},{collections:[].concat(Object(D.a)(e.collections),[{userName:a,posts:[],friends:[]}])});case"SHIFT_LAST_TEN":return Object(C.a)(Object(C.a)({},e),{},{lastTen:Object(D.a)(e.lastTen.slice(1))});case"PUSH_LAST_TEN":return Object(C.a)(Object(C.a)({},e),{},{lastTen:[].concat(Object(D.a)(e.lastTen),[{userId:t.payload.userId,postId:t.payload.postId}])});case"SEND_POST":var n=t.payload,s=n.post,r=n.date,l=Object(C.a)({},e);return l.collections[t.payload.userId].posts.push({post:s,date:r}),Object(C.a)(Object(C.a)({},e),{},{updatedCollections:l});case"REMOVE_FRIEND":return Object(C.a)(Object(C.a)({},e),{},{collections:Object(D.a)(e.collections.map((function(e,a){return a===t.payload.userId?Object(C.a)(Object(C.a)({},e),{},{friends:Object(D.a)(e.friends.filter((function(e,a){return a!==t.payload.deletionId})))}):e})))});case"UPDATE_REMOVED_FRIENDS_POSTS":return Object(C.a)(Object(C.a)({},e),{},{currentUser:Object(C.a)(Object(C.a)({},e.currentUser),{},{friendsPosts:t.payload.friendsPosts})});case"UPDATE_ADDED_FRIENDS_POSTS":return Object(C.a)(Object(C.a)({},e),{},{currentUser:Object(C.a)(Object(C.a)({},e.currentUser),{},{friendsPosts:[].concat(Object(D.a)(e.currentUser.friendsPosts),Object(D.a)(t.payload.friendsPosts))})});case"ADD_FRIEND":var o=Object(C.a)({},e);return o.collections[t.payload.userId].friends.push(t.payload.friendName),Object(C.a)(Object(C.a)({},e),{},{addedFriends:o});default:return e}}));l.a.render(s.a.createElement(h.a,{store:L},s.a.createElement(k,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.8df1be59.chunk.js.map